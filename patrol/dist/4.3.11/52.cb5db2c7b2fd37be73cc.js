webpackJsonp([52],{782:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(3),u=r(n),d=a(209),l=r(d),o=a(148),s=r(o);a(210);var i=a(320);a(60);t.default={namespace:"dotEdit",state:{detail:{},ruleData:[],typeData:[],hisData:[],deId:"",historys:{},hisDataDetail:[],defRadio:0,lat:"",lng:"",isSetMap:!1,orgData:[],employeeData:[]},subscriptions:{setup:function(e){var t=e.dispatch;e.history.listen(function(e){if("/dot/dotEdit"===e.pathname){var a=e.query.ids,r={};r.pointId=a,t({type:"getRule",payload:r}),t({type:"queryDetail",payload:r});var n={};n.pointId=a,n.pageSize=50,t({type:"queryHistory",payload:n});var u={};u.pageIndex=1,u.pageSize=100,t({type:"queryTypes",payload:u}),t({type:"queryOrgs",payload:{}})}})}},effects:{getUsers:s.default.mark(function e(t,a){var r,n,u=t.payload,d=a.call,l=a.put;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(i.getUser,u);case 2:if(r=e.sent,200!=r.code||null===r.data){e.next=14;break}if(null===(n=r.data)){e.next=10;break}return e.next=8,l({type:"employeeData",payload:n.data});case 8:e.next=12;break;case 10:return e.next=12,l({type:"employeeData",payload:[]});case 12:e.next=16;break;case 14:return e.next=16,l({type:"employeeData",payload:[]});case 16:case"end":return e.stop()}},e,this)}),queryOrgs:s.default.mark(function e(t,a){var r,n,u,d=t.payload,l=a.call,o=a.put;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(i.qeryQrg,d);case 2:if(r=e.sent,200!=r.code||null===r.data){e.next=10;break}if(n=r.data,!(n.length>0)){e.next=10;break}if(null===n[0].children){e.next=10;break}return u=n[0].children,e.next=10,o({type:"orgData",payload:n[0].children});case 10:case"end":return e.stop()}},e,this)}),queryTypes:s.default.mark(function e(t,a){var r,n=t.payload,u=a.call,d=a.put;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(i.dotTypeList,n);case 2:if(r=e.sent,200!=r.code||null===r.data.data){e.next=6;break}return e.next=6,d({type:"setType",payload:r.data.data});case 6:case"end":return e.stop()}},e,this)}),queryDetail:s.default.mark(function e(t,a){var r,n=t.payload,u=a.call,d=a.put;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(i.dotDetail,n);case 2:if(r=e.sent,200!=r.code){e.next=12;break}return e.next=6,d({type:"defRadio",payload:parseInt(r.data.roundPoint)});case 6:return e.next=8,d({type:"setDetail",payload:r.data});case 8:return e.next=10,d({type:"isSetMap",payload:!0});case 10:return e.next=12,d({type:"setLat",lat:r.data.dimension,lng:r.data.longitude});case 12:case"end":return e.stop()}},e,this)}),getRule:s.default.mark(function e(t,a){var r,n=t.payload,u=a.call,d=a.put;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(i.dotRule,n);case 2:if(r=e.sent,200!=r.code){e.next=7;break}if(null===r.data||0===r.data.length){e.next=7;break}return e.next=7,d({type:"setRule",payload:r.data[0].checkRuleItems});case 7:case"end":return e.stop()}},e,this)}),queryHistory:s.default.mark(function e(t,a){var r,n=t.payload,u=a.call,d=a.put;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(i.dotHistory,n);case 2:if(r=e.sent,200!=r.code){e.next=7;break}if(null===r.data||0===r.data.length){e.next=7;break}return e.next=7,d({type:"setHistory",payload:r.data.data});case 7:case"end":return e.stop()}},e,this)}),getHistory:s.default.mark(function e(t,a){var r,n=t.payload,u=a.call,d=a.put;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(i.dotHistoryDetail,n);case 2:if(r=e.sent,200!=r.code){e.next=7;break}if(null===r.data){e.next=7;break}return e.next=7,d({type:"hisDataDetail",payload:r.data.checkRecordItems});case 7:case"end":return e.stop()}},e,this)}),addDot:s.default.mark(function e(t,a){var r,n=t.payload,u=a.call;a.put;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(i.dotAdd,n);case 2:r=e.sent,200==r.code&&(200==r.code?(l.default.success("\u4fee\u6539\u6210\u529f!"),setTimeout(function(){history.go(-1)},500)):l.default.error("\u4fee\u6539\u5931\u8d25!"));case 4:case"end":return e.stop()}},e,this)})},reducers:{clearData:function(e){return(0,u.default)({},e,{detail:{},ruleData:[],typeData:[],hisData:[],showDetail:!1,deId:"",historys:{},defRadio:0,lat:"",lng:"",isSetMap:!1})},setLat:function(e,t){return(0,u.default)({},e,{lat:t.lat,lng:t.lng})},isSetMap:function(e,t){return(0,u.default)({},e,{isSetMap:t.payload})},defRadio:function(e,t){return(0,u.default)({},e,{defRadio:t.payload})},deId:function(e,t){return(0,u.default)({},e,{deId:t.payload})},historys:function(e,t){return(0,u.default)({},e,{historys:t.payload})},showDetail:function(e,t){return(0,u.default)({},e,{showDetail:t.payload})},setType:function(e,t){return(0,u.default)({},e,{typeData:t.payload})},setDetail:function(e,t){return(0,u.default)({},e,{detail:t.payload})},setRule:function(e,t){return(0,u.default)({},e,{ruleData:t.payload})},hisDataDetail:function(e,t){return(0,u.default)({},e,{hisDataDetail:t.payload})},setHistory:function(e,t){return(0,u.default)({},e,{hisData:t.payload})},querySuccess:function(e,t){return(0,u.default)({},e,{data:t.payload})},employeeData:function(e,t){return(0,u.default)({},e,{employeeData:t.payload})},orgData:function(e,t){return(0,u.default)({},e,{orgData:t.payload})}}},e.exports=t.default}});